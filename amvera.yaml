name: birthday-bot
image: cr.yandex/crp2gf3gm8rv83kfkvet/amvera-ayub-eldarius
appPort: 80

meta:
  environment: docker
  toolchain: docker

build:
  dockerfile: Dockerfile
  context: .
  args:
    - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}

resources:
  cpu: 0.2
  memory: 512Mi

volumes:
  - name: data
    path: /app/data
    size: 1Gi

env:
  - name: DATABASE_PATH
    value: /app/data/birthdays.db
  - name: TELEGRAM_BOT_TOKEN
    value: ${TELEGRAM_BOT_TOKEN}

run:
  persistenceMount: /app/data
  containerPort: 80
  
registry:
  image: birthday-bot
  tag: latest 